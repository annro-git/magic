
function setCharCounter (n) {
var o = document.getElementById('contenu');
o.charCounterMin = n;
o.charCounterDisplay = 'compteur';
o.onkeyup = charCounterUpdate;
}
function charCounterUpdate() {
var n = this.value.length;
var caractere_restant ;

if (this.charCounterDisplay)
{
	var o = document.getElementById(this.charCounterDisplay);
	if (o.tagName.toLowerCase()=="input") o.value = 110 - n;
	else 
	{
		caractere_restant = 110 - n ;
		if (caractere_restant < 1 )
			o.innerHTML = "<font color=\"green\"><b>Qu\'il en soit ainsi !</b></font>" ;
		else
			o.innerHTML = "Encore <b><font color=\"red\">" + caractere_restant + "</font></b> caractères ou le Dark Mogwaï se fâche !" ;
	}
}

}

function check_formulaire(minChar) {

error = "" ;

if (document.publier_comment.commentaire.value=='')
	error += "Saisissez un commentaire.\n" ;
else
{
	if (document.publier_comment.commentaire.value.length < minChar)
		error += "Un commentaire mérite un peu plus d'explications.\n" ;
}
if (error == '')
{
	document.publier_comment.submit() ;
	//addComment() ;
}
else
{
	alert(error + "\nCorrigez vos erreurs svp.") ;
}
}




function storeCaret(text)
{
	// voided but mandatory
}



function InsertCode(repdeb, repfin, type_com) {
  
	switch(type_com)
	{
   		case 'dataForm':
  		var input = document.forms['dataForm'].elements['dataText'];
  		break; 
   		case 'refuseDataForm':
  		var input = document.forms['refuseDataForm'].elements['dataValidationComment'];
  		break; 
		case 'modification':
  		var input = document.forms['formContentModification'].elements['text'];
  		break; 		
		case 'comments':
  		var input = document.forms['publier_comment'].elements['commentaire'];
  		break;
  		case 'fc':
  		var input = document.forms['publier_funcard'].elements['description'];
  		break;
  		case 'combo':
  		var input = document.forms['publier_combo'].elements['description'];
  		break;
  		case 'deck':
  		var input = document.forms['publier_deck'].elements['description'];
  		break;   
  		case 'user':
  		var input = document.forms['new_member'].elements['bio'];
  		break;   		
  		case 'user_modif':
  		var input = document.forms['update'].elements['biographie'];
  		break;
  		case 'mp':
  		var input = document.forms['formulaire_message'].elements['message'];
  		break;		
  		case 'accept_management':
  		var input = document.forms['accept_management'].elements['commentaire'];
  		break;
  		case 'nouvelle':
  		var input = document.forms['form1'].elements['nouvelle'];
  		break;			
	}
  
  input.focus();
  /* pour l'Explorer Internet */
  if(typeof document.selection != 'undefined') {
    /* Insertion du code de formatage */
    var range = document.selection.createRange();
    var insText = range.text;
    range.text = repdeb + insText + repfin;
    /* Ajustement de la position du curseur */
    range = document.selection.createRange();
    if (insText.length == 0) {
      range.move('character', -repfin.length);
    } else {
      range.moveStart('character', repdeb.length + insText.length + repfin.length);
    }
    range.select();
  }
  /* pour navigateurs plus récents basés sur Gecko*/
  else if(typeof input.selectionStart != 'undefined')
  {
    /* Insertion du code de formatage */
    var start = input.selectionStart;
    var end = input.selectionEnd;
    var insText = input.value.substring(start, end);
    input.value = input.value.substr(0, start) + repdeb + insText + repfin + input.value.substr(end);
    /* Ajustement de la position du curseur */
    var pos;
    if (insText.length == 0) {
      pos = start + repdeb.length;
    } else {
      pos = start + repdeb.length + insText.length + repfin.length;
    }
    input.selectionStart = pos;
    input.selectionEnd = pos;
  }
  /* pour les autres navigateurs */
  else
  {
    /* requête de la position d'insertion */
    var pos;
    var re = new RegExp('^[0-9]{0,3}$');
    while(!re.test(pos)) {
      pos = prompt("Insertion à la position (0.." + input.value.length + "):", "0");
    }
    if(pos > input.value.length) {
      pos = input.value.length;
    }
    /* Insertion du code de formatage */
    var insText = prompt("Veuillez entrer le texte à formater:");
    input.value = input.value.substr(0, pos) + repdeb + insText + repfin + input.value.substr(pos);
  }
}



function InsertCodeAnswer(repdeb, repfin, answerForm) {
  

	var input = document.forms[answerForm].elements['commentaire'];
	
  input.focus();
  /* pour l'Explorer Internet */
  if(typeof document.selection != 'undefined') {
    /* Insertion du code de formatage */
    var range = document.selection.createRange();
    var insText = range.text;
    range.text = repdeb + insText + repfin;
    /* Ajustement de la position du curseur */
    range = document.selection.createRange();
    if (insText.length == 0) {
      range.move('character', -repfin.length);
    } else {
      range.moveStart('character', repdeb.length + insText.length + repfin.length);
    }
    range.select();
  }
  /* pour navigateurs plus récents basés sur Gecko*/
  else if(typeof input.selectionStart != 'undefined')
  {
    /* Insertion du code de formatage */
    var start = input.selectionStart;
    var end = input.selectionEnd;
    var insText = input.value.substring(start, end);
    input.value = input.value.substr(0, start) + repdeb + insText + repfin + input.value.substr(end);
    /* Ajustement de la position du curseur */
    var pos;
    if (insText.length == 0) {
      pos = start + repdeb.length;
    } else {
      pos = start + repdeb.length + insText.length + repfin.length;
    }
    input.selectionStart = pos;
    input.selectionEnd = pos;
  }
  /* pour les autres navigateurs */
  else
  {
    /* requête de la position d'insertion */
    var pos;
    var re = new RegExp('^[0-9]{0,3}$');
    while(!re.test(pos)) {
      pos = prompt("Insertion à la position (0.." + input.value.length + "):", "0");
    }
    if(pos > input.value.length) {
      pos = input.value.length;
    }
    /* Insertion du code de formatage */
    var insText = prompt("Veuillez entrer le texte à formater:");
    input.value = input.value.substr(0, pos) + repdeb + insText + repfin + input.value.substr(pos);
  }
}